{"version":3,"sources":["components/Filter.js","components/Person.js","components/PersonForm.js","services/persons.js","App.js","index.js"],"names":["Filter","props","handleFilter","onChange","Person","persons","deletePerson","map","person","i","name","number","onClick","PersonForm","personChange","numberChange","value","baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Notification","message","type","className","App","useState","setPersons","newName","setNewName","setNumber","addedMessage","setAddedMessage","errorMessage","setErrorMessage","useEffect","personService","returnedPersons","filterPersons","f","filter","includes","updatePerson","console","log","returnedPerson","event","target","onSubmit","preventDefault","personObject","alreadyOnList","find","o","window","confirm","createPerson","a","catch","error","status","concat","setTimeout","request","addPerson","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"yNAYeA,EAVA,SAACC,GACZ,IAAMC,EAAeD,EAAME,SAC3B,OACI,qDAEI,uBAAOA,SAAUD,QCcdE,EAnBA,SAACH,GACZ,IAAMI,EAAUJ,EAAMI,QAChBC,EAAeL,EAAMK,aAC3B,OACI,6BACKD,EAAQE,KAAI,SAACC,EAAQC,GAClB,OACI,+BACKD,EAAOE,KADZ,IACmBF,EAAOG,OAAQ,IAC9B,wBAAQC,QAAS,kBAAMN,EAAaE,IAApC,sBAFKC,SCSdI,EAhBI,SAACZ,GAAW,IACnBS,EAA6CT,EAA7CS,KAAMC,EAAuCV,EAAvCU,OAAQG,EAA+Bb,EAA/Ba,aAAcC,EAAiBd,EAAjBc,aACpC,OACI,gCACI,wCAEI,uBAAOC,MAAON,EAAMP,SAAUW,OAElC,0CAEI,uBAAOE,MAAOL,EAAQR,SAAUY,W,gBCX1CE,EAAU,eAsBD,EApBA,WAEX,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAACC,GAAD,OAAcA,EAASC,SAkBhC,EAfA,SAACC,GAEZ,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAahC,EAVA,SAACG,GAEZ,OADgBP,IAAMQ,OAAN,UAAgBT,EAAhB,YAA2BQ,IAC5BL,MAAK,SAACC,GAAD,OAAcA,EAASC,SAQhC,EALA,SAACG,EAAIF,GAEhB,OADgBL,IAAMS,IAAN,UAAaV,EAAb,YAAwBQ,GAAMF,GAC/BH,MAAK,SAACC,GAAD,OAAcA,EAASC,SC0HzCM,G,MAAe,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,KAC7B,OAAgB,OAAZD,EACO,KAGE,SAATC,EACO,qBAAKC,UAAU,OAAf,SAAuBF,IAEvB,qBAAKE,UAAU,UAAf,SAA0BF,MAI1BG,EAnJH,WAAO,IAAD,EACgBC,mBAAS,IADzB,mBACP5B,EADO,KACE6B,EADF,OAEgBD,mBAAS,IAFzB,mBAEPE,EAFO,KAEEC,EAFF,OAGcH,mBAAS,IAHvB,mBAGPtB,EAHO,KAGC0B,EAHD,OAI0BJ,mBAAS,MAJnC,mBAIPK,EAJO,KAIOC,EAJP,OAK0BN,mBAAS,MALnC,mBAKPO,EALO,KAKOC,EALP,KAOdC,qBAAU,WACNC,IAAuBvB,MAAK,SAACwB,GACzBV,EAAWU,QAEhB,IAEH,IAqEMC,EAAgB,SAACxC,EAASyC,GAC5B,OAAOzC,EAAQ0C,QAAO,SAACvC,GAAD,OAAYA,EAAOE,KAAKsC,SAASF,OAcrDG,EAAe,SAACxB,EAAIjB,GACtB0C,QAAQC,IAAI3C,GACZmC,EAAqBlB,EAAIjB,GAAQY,MAAK,SAACgC,GACnClB,EACI7B,EAAQE,KAAI,SAACC,GAAD,OACRA,EAAOiB,KAAOA,EAAKjB,EAAS4C,UAM5C,OACI,gCACI,2CACA,cAAC,EAAD,CAAcvB,QAASW,EAAcV,KAAK,SAC1C,wCACA,cAAC,EAAD,CAAQ3B,SAnCK,SAACkD,GAClBnB,EAAWW,EAAcxC,EAASgD,EAAMC,OAAOtC,WAmC3C,uBAAMuC,SArGE,SAACF,GACbA,EAAMG,iBACN,IAAMC,EAAe,CACjB/C,KAAMyB,EACNxB,OAAQA,GAGN+C,EAAgBrD,EAAQsD,MAAK,SAACC,GAAD,OAAOA,EAAElD,OAASyB,KAErD,GAAKuB,EAqCGG,OAAOC,QAAP,UACOL,EAAa/C,KADpB,sEAIAuC,EAAaS,EAAcjC,GAAIgC,GAC/BrB,EAAW,IACXC,EAAU,SA3CE,CAChB,IAAM0B,EAAY,uCAAG,iBAAAC,EAAA,SAAAA,EAAA,sEACDrB,EACJc,GACPrC,MAAK,SAACgC,GACH,OAAOA,KAEVa,OAAM,SAACC,GACJ,OAAOA,EAAM7C,YAPJ,cACX2C,EADW,yBAUVA,GAVU,2CAAH,sDAaH,uCAAG,iBAAAA,EAAA,SAAAA,EAAA,sEACED,IADF,OAEG,OADXC,EADQ,QAERG,QACFjC,EAAW7B,EAAQ+D,OAAOJ,IAC1BzB,EAAgB,GAAD,OACRkB,EAAa/C,KADL,0BAGf2D,YAAW,WACP9B,EAAgB,QACjB,KACHH,EAAW,IACXC,EAAU,MAEVI,EAAgBuB,EAAEM,QAAQjD,UAC1BgD,YAAW,WACP5B,EAAgB,QACjB,MAhBO,2CAAH,qDAoBf8B,KA0DA,UACI,gCACI,2CACA,cAAC,EAAD,CACI7D,KAAMyB,EACNxB,OAAQA,EACRG,aAlDO,SAACuC,GACxBjB,EAAWiB,EAAMC,OAAOtC,QAkDRD,aA/CO,SAACsC,GACxBhB,EAAUgB,EAAMC,OAAOtC,aAiDf,8BACI,wBAAQc,KAAK,SAAb,sBAGR,cAAC,EAAD,CAAcD,QAASS,EAAcR,KAAK,YAC1C,yCACA,cAAC,EAAD,CAAQzB,QAASA,EAASC,aA5Cb,SAACE,GACdqD,OAAOC,QAAP,iBAAyBtD,EAAOE,KAAhC,OACAiC,EAAqBnC,EAAOiB,IAAIL,MAAK,WACjCuB,IAAuBvB,MAAK,SAACwB,GACzBV,EAAWU,gBC7F/B4B,IAASC,OACL,cAAC,IAAMC,WAAP,UACI,cAAC,EAAD,MAEJC,SAASC,eAAe,W","file":"static/js/main.f92e847b.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = (props) => {\n    const handleFilter = props.onChange;\n    return (\n        <div>\n            filter shown with:\n            <input onChange={handleFilter} />\n        </div>\n    );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst Person = (props) => {\n    const persons = props.persons;\n    const deletePerson = props.deletePerson;\n    return (\n        <ul>\n            {persons.map((person, i) => {\n                return (\n                    <li key={i}>\n                        {person.name} {person.number}{\" \"}\n                        <button onClick={() => deletePerson(person)}>\n                            delete\n                        </button>\n                    </li>\n                );\n            })}\n        </ul>\n    );\n};\n\nexport default Person;\n","import React from \"react\";\n\nconst PersonForm = (props) => {\n    const { name, number, personChange, numberChange } = props;\n    return (\n        <div>\n            <div>\n                name:\n                <input value={name} onChange={personChange} />\n            </div>\n            <div>\n                number:\n                <input value={number} onChange={numberChange} />\n            </div>\n        </div>\n    );\n};\n\nexport default PersonForm;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n    const request = axios.get(baseUrl);\n    return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n    const request = axios.post(baseUrl, newObject);\n    return request.then((response) => response.data);\n};\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`);\n    return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\n    return request.then((response) => response.data);\n};\n\nexport default { getAll, create, remove, update };\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport Person from \"./components/Person\";\nimport PersonForm from \"./components/PersonForm\";\nimport personService from \"./services/persons\";\nimport \"./app.css\";\n\nconst App = () => {\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState(\"\");\n    const [number, setNumber] = useState(\"\");\n    const [addedMessage, setAddedMessage] = useState(null);\n    const [errorMessage, setErrorMessage] = useState(null);\n\n    useEffect(() => {\n        personService.getAll().then((returnedPersons) => {\n            setPersons(returnedPersons);\n        });\n    }, []);\n\n    const addName = (event) => {\n        event.preventDefault();\n        const personObject = {\n            name: newName,\n            number: number,\n        };\n\n        const alreadyOnList = persons.find((o) => o.name === newName);\n\n        if (!alreadyOnList) {\n            const createPerson = async () => {\n                const a = await personService\n                    .create(personObject)\n                    .then((returnedPerson) => {\n                        return returnedPerson;\n                    })\n                    .catch((error) => {\n                        return error.response;\n                    });\n\n                return a;\n            };\n\n            const addPerson = async () => {\n                const a = await createPerson();\n                if (a.status !== 400) {\n                    setPersons(persons.concat(a));\n                    setAddedMessage(\n                        `${personObject.name} was added to numbers`\n                    );\n                    setTimeout(() => {\n                        setAddedMessage(null);\n                    }, 2000);\n                    setNewName(\"\");\n                    setNumber(\"\");\n                } else {\n                    setErrorMessage(a.request.response);\n                    setTimeout(() => {\n                        setErrorMessage(null);\n                    }, 2000);\n                }\n            };\n\n            addPerson();\n        } else {\n            if (\n                window.confirm(\n                    `${personObject.name} is already on the list, replace the old number with a new one?`\n                )\n            ) {\n                updatePerson(alreadyOnList.id, personObject);\n                setNewName(\"\");\n                setNumber(\"\");\n            }\n        }\n    };\n\n    const handlePersonChange = (event) => {\n        setNewName(event.target.value);\n    };\n\n    const handleNumberChange = (event) => {\n        setNumber(event.target.value);\n    };\n\n    const handleFilter = (event) => {\n        setPersons(filterPersons(persons, event.target.value));\n    };\n\n    const filterPersons = (persons, f) => {\n        return persons.filter((person) => person.name.includes(f));\n    };\n\n    const deletePerson = (person) => {\n        if (window.confirm(`delete ${person.name}?`)) {\n            personService.remove(person.id).then(() => {\n                personService.getAll().then((returnedPersons) => {\n                    setPersons(returnedPersons);\n                });\n            });\n        }\n        return;\n    };\n\n    const updatePerson = (id, person) => {\n        console.log(person);\n        personService.update(id, person).then((returnedPerson) => {\n            setPersons(\n                persons.map((person) =>\n                    person.id !== id ? person : returnedPerson\n                )\n            );\n        });\n    };\n\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Notification message={errorMessage} type=\"fail\" />\n            <h2>Search</h2>\n            <Filter onChange={handleFilter} />\n            <form onSubmit={addName}>\n                <div>\n                    <h2>Add a new</h2>\n                    <PersonForm\n                        name={newName}\n                        number={number}\n                        personChange={handlePersonChange}\n                        numberChange={handleNumberChange}\n                    />\n                </div>\n                <div>\n                    <button type=\"submit\">add</button>\n                </div>\n            </form>\n            <Notification message={addedMessage} type=\"success\" />\n            <h2>Numbers</h2>\n            <Person persons={persons} deletePerson={deletePerson} />\n        </div>\n    );\n};\n\nconst Notification = ({ message, type }) => {\n    if (message === null) {\n        return null;\n    }\n\n    if (type === \"fail\") {\n        return <div className=\"fail\">{message}</div>;\n    } else {\n        return <div className=\"success\">{message}</div>;\n    }\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App.js\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}